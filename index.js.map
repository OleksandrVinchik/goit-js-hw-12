{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '48167569-742bafd1cf9306d4d73187ce8';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(\n    query\n  )}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(url);\n    const { hits, totalHits } = response.data;\n    return { images: hits, total: totalHits };\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.getElementById('gallery');\nlet lightbox;\n\nexport function renderImages(images) {\n  const markup = images\n    .map(\n      image => `\n      <a href=\"${image.largeImageURL}\" class=\"gallery-item\" data-lightbox=\"gallery\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n        <p>Likes: ${image.likes} | Views: ${image.views} | Comments: ${image.comments} | Downloads: ${image.downloads}</p>\n      </a>`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a');\n  } else {\n    lightbox.refresh();\n  }\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, clearGallery } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchForm = document.getElementById('search-form');\nconst searchInput = document.getElementById('search-input');\nconst loadMoreButton = document.getElementById('load-more');\nconst loader = document.getElementById('loader');\n\nlet query = '';\nlet currentPage = 1;\nconst imagesPerPage = 15;\nlet totalHits = 0;\n\nsearchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n  query = searchInput.value.trim();\n\n  if (!query) {\n    clearGallery();\n    iziToast.error({ title: 'Error', message: 'Please enter a search query!' });\n    return;\n  }\n\n  currentPage = 1;\n  clearGallery();\n  toggleLoader(true);\n  loadMoreButton.classList.add('hidden');\n\n  try {\n    const { images, total } = await fetchImages(\n      query,\n      currentPage,\n      imagesPerPage\n    );\n    totalHits = total;\n    toggleLoader(false);\n\n    if (images.length === 0) {\n      iziToast.warning({\n        title: 'Error!',\n        message: 'No images found. Please try a different search query.',\n      });\n    } else {\n      renderImages(images);\n      if (images.length < imagesPerPage || totalHits <= imagesPerPage) {\n        loadMoreButton.classList.add('hidden');\n      } else {\n        loadMoreButton.classList.remove('hidden');\n      }\n    }\n  } catch (error) {\n    toggleLoader(false);\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again!',\n    });\n  }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  currentPage += 1;\n  toggleLoader(true);\n\n  try {\n    const { images } = await fetchImages(query, currentPage, imagesPerPage);\n    toggleLoader(false);\n\n    if (currentPage * imagesPerPage >= totalHits) {\n      loadMoreButton.classList.add('hidden');\n      iziToast.info({\n        title: 'End of Results',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    } else {\n      renderImages(images);\n      smoothScroll();\n    }\n  } catch (error) {\n    toggleLoader(false);\n    iziToast.error({ title: 'Error', message: 'Failed to load more images.' });\n  }\n});\n\nfunction toggleLoader(visible) {\n  if (visible) {\n    loader.style.display = 'block';\n  } else {\n    loader.style.display = 'none';\n  }\n}\n\nfunction smoothScroll() {\n  const cardHeight = document\n    .querySelector('.gallery a')\n    .getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","url","response","axios","hits","totalHits","error","gallery","lightbox","renderImages","images","markup","image","SimpleLightbox","clearGallery","searchForm","searchInput","loadMoreButton","loader","currentPage","imagesPerPage","event","iziToast","toggleLoader","total","smoothScroll","visible","cardHeight"],"mappings":"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"}